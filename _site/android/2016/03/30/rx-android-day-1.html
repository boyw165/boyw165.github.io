<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Rx-Android Day 1</title>
  <meta name="description" content="I assume you guys already know a little bit of Functional Programming and Java Generics but, don’t really know about HOT and COLD observables of rx-java.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yourdomain.com/android/2016/03/30/rx-android-day-1.html">
  <link rel="alternate" type="application/rss+xml" title="c@d3, and shar3" href="http://yourdomain.com/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">c@d3, and shar3</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Rx-Android Day 1</h1>
    <p class="post-meta"><time datetime="2016-03-30T00:00:00+08:00" itemprop="datePublished">Mar 30, 2016</time></p>
    <script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I assume you guys already know a little bit of <a href="https://maryrosecook.com/blog/post/a-practical-introduction-to-functional-programming">Functional Programming</a> and <a href="https://docs.oracle.com/javase/tutorial/java/generics/index.html">Java Generics</a> but, don’t really know about <strong>HOT</strong> and <strong>COLD</strong> observables of <a href="https://github.com/ReactiveX/RxJava">rx-java</a>.</p>

<p>Here’s a simple introduction of <a href="https://github.com/ReactiveX/RxJava">rx-java</a>:</p>

<p>In ReactiveX an observer subscribes to an Observable. Then that observer reacts to whatever item or sequence of items the Observable emits. This pattern facilitates concurrent operations because it does not need to block while waiting for the Observable to emit objects, but instead it creates a sentry in the form of an observer that stands ready to react appropriately at whatever future time the Observable does so.</p>

<blockquote>
  <p>You can treat observables like function calls.</p>
</blockquote>

<p>A <strong>HOT</strong> Observable may begin emitting items as soon as it is created, and so any observer who later subscribes to that Observable may start observing the sequence somewhere in the middle. Examples of items emitted by a hot Observable might include <em>mouse &amp; keyboard events, system events, or stock prices</em>.</p>

<p>A <strong>COLD</strong> Observable, on the other hand, waits until an observer subscribes to it before it begins to emit items, and so such an observer is guaranteed to see the whole sequence from the beginning. Examples of items emitted by a cold Observable might include <em>the results of a database query, file retrieval, or web request</em>.</p>

<p>The best definition I’ve ever heard is:</p>

<blockquote>
  <p>Think of a hot Observable as a radio station. All of the listeners that are listening to it at this moment listen to the same song.</p>

  <p>A cold Observable is a music CD. Many people can buy it and listen to it independently.</p>

  <p>by Nickolay Tsvetinov</p>
</blockquote>

<hr />

<h3 id="lets-write-a-cold-observable-sample">Let’s Write a “Cold” Observable Sample</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">_log</span><span class="o">(</span><span class="s">"Before Observable"</span><span class="o">);</span>

<span class="c1">// Create a "cold" observable.</span>
<span class="n">Observable</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;</span> <span class="n">ob</span> <span class="o">=</span> <span class="n">Observable</span>
    <span class="c1">// The "just" convert a boolean into an Observable.</span>
    <span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="c1">// Transform the items emitted by an Observable by applying a function to each item.</span>
    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="k">new</span> <span class="n">Func1</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">,</span> <span class="n">Boolean</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">Boolean</span> <span class="nf">call</span><span class="o">(</span><span class="n">Boolean</span> <span class="n">aBoolean</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">_log</span><span class="o">(</span><span class="s">"Within Observable"</span><span class="o">);</span>
            <span class="n">_doSomeLongOperation_thatBlocksCurrentThread</span><span class="o">();</span>
            <span class="k">return</span> <span class="n">aBoolean</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">})</span>
    <span class="c1">// Run Observable asynchronously.</span>
    <span class="o">.</span><span class="na">subscribeOn</span><span class="o">(</span><span class="n">Schedulers</span><span class="o">.</span><span class="na">io</span><span class="o">())</span>
    <span class="c1">// Emit the items to subscribers on main thread.</span>
    <span class="o">.</span><span class="na">observeOn</span><span class="o">(</span><span class="n">AndroidSchedulers</span><span class="o">.</span><span class="na">mainThread</span><span class="o">());</span>
</code></pre>
</div>

<p>So far the <strong>COLD</strong> Observable is created but yet executed! Actually the cold Observable is a function call waiting for being processed.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// Observe and get the subscription (like a voucher).</span>
<span class="n">Subscription</span> <span class="n">subscription</span> <span class="o">=</span> <span class="n">ob</span>
    <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Action1</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">(</span><span class="n">Boolean</span> <span class="n">bool</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">_log</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Call with return value \"%b\""</span><span class="o">,</span> <span class="n">bool</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">});</span>

<span class="n">_log</span><span class="o">(</span><span class="s">"Right after Observable"</span><span class="o">);</span>
</code></pre>
</div>
<p>The <strong>COLD</strong> observable is processed when an observer subscribes to it immediately. But we trickly make the observable to be processed in a work thread (not main thread) and get the result in the main thread.</p>

<p>The output log is:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Before Observable <span class="o">(</span>main thread<span class="o">)</span>
Right after Observable <span class="o">(</span>main thread<span class="o">)</span>
Within Observable <span class="o">(</span>NOT main thread<span class="o">)</span>
performing long operation <span class="o">(</span>NOT main thread<span class="o">)</span>
onNext with <span class="k">return </span>value <span class="s2">"true"</span> <span class="o">(</span>main thread<span class="o">)</span>
onComplete <span class="o">(</span>main thread<span class="o">)</span>
</code></pre>
</div>

<p>So what if you want the code to be synchronously executed? You just <strong>REMOVE</strong> the following line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.subscribeOn(Schedulers.io())
</code></pre>
</div>

<p>And the output log will be:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Before Observable <span class="o">(</span>main thread<span class="o">)</span>
Within Observable <span class="o">(</span>NOT main thread<span class="o">)</span>
performing long operation <span class="o">(</span>NOT main thread<span class="o">)</span>
onNext with <span class="k">return </span>value <span class="s2">"true"</span> <span class="o">(</span>main thread<span class="o">)</span>
onComplete <span class="o">(</span>main thread<span class="o">)</span>
Right after Observable <span class="o">(</span>main thread<span class="o">)</span>
</code></pre>
</div>

<p>Now you know the <strong>COLD</strong> observable is created and executed when an observer subscribes to it. A <strong>COLD</strong> Observable is “replayable”, meaning it will “replay” its emissions to each Subscriber independently.</p>

<blockquote>
  <p>A cold Observable is a music CD. Many people can buy it and listen to it independently.</p>
</blockquote>

<hr />

<h3 id="a-hot-observable-sample">A “Hot” Observable Sample</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">_log</span><span class="o">(</span><span class="s">"Before Observable"</span><span class="o">);</span>

<span class="c1">// The publish operator makes it a HOT observable.</span>
<span class="n">Observable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ob</span> <span class="o">=</span> <span class="n">Observable</span>
    <span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
    <span class="c1">// The operator transforms it to a hot observable.</span>
    <span class="o">.</span><span class="na">publish</span><span class="o">();</span>

<span class="c1">// Process the observable.</span>
<span class="n">ob</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>

<span class="c1">// An subscriber subscribes to the observable.</span>
<span class="n">ob</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">new</span> <span class="n">Action1</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">(</span><span class="n">Integer</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">_log</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Call with return value \"%d\""</span><span class="o">,</span> <span class="n">number</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">});</span>

<span class="n">_log</span><span class="o">(</span><span class="s">"Right after Observable"</span><span class="o">);</span>
</code></pre>
</div>

<p>The output log is:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Before Observable <span class="o">(</span>main thread<span class="o">)</span>
Right after Observable <span class="o">(</span>main thread<span class="o">)</span>
</code></pre>
</div>

<p>By calling <a href="http://reactivex.io/documentation/operators/publish.html">publish</a>, the observable transforms to a <strong>HOT</strong> observable.
You might notice that, the observer subscribes to the <strong>HOT</strong> observable right after the observable calls <a href="http://reactivex.io/documentation/operators/connect.html">connect</a> to emit certain stream and the observer just got nothing. Because a <strong>HOT</strong> Observable will emit the same item at a given time to all its Subscribers, and it may not even care if any Subscribers are present.</p>

<blockquote>
  <p>A hot Observable as a radio station. All of the listeners that are listening to it at this moment listen to the same song.</p>
</blockquote>

<p>More info:</p>

<ul>
  <li><a href="https://gist.github.com/boyw165/0e4e3dc0e4e001c7aa2b0297d752ff4e">Sample of cold observable</a></li>
  <li><a href="https://gist.github.com/boyw165/9a022d42c8fc978717321c6b588ed768">Sample of hot observable</a></li>
  <li><a href="http://reactivex.io/documentation/observable.html">Official document</a></li>
</ul>

<hr />

<p>Next topic is, Subject and its Applications. link (coming soon)</p>


  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">c@d3, and shar3</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>c@d3, and shar3</li>
          <li><a href="mailto:boyw165@gmail.com">boyw165@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/boyw165"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">boyw165</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/boyw165"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">boyw165</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>A blog for sharing software infrastructure, algorithms, Machine Learning and fun technology.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
